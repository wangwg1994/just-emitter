{"version":3,"file":null,"sources":["../src/index.js"],"sourcesContent":["// @flow\n\nfunction bind (eventName, callback) {\n    if (!eventName || !callback) return this;\n\n    let i,\n        len,\n        base,\n        name,\n        events;\n\n    events = eventName.split(' ');\n    len = events.length;\n\n    if (!this.hasOwnProperty('_callbacks')) {\n        this._callbacks || (this._callbacks = {});\n    }\n\n    for (i = 0; i < len; i++) {\n        name = events[i];\n        (base = this._callbacks)[name] || (base[name] = []);\n        this._callbacks[name].push(callback);\n    }\n\n    return this;\n}\n\nfunction unbind (eventName, callback) {\n    let i,\n        j,\n        cb,\n        len,\n        list,\n        name,\n        events;\n\n    if (arguments.length === 0) {\n        this._callbacks = {};\n\n        return this;\n    }\n\n    if (!eventName) return this;\n\n    events = eventName.split(' ');\n\n    for (i = 0, len = events.length; i < len; i++) {\n        name = events[i];\n        list = this._callbacks !== null ? this._callbacks[name] : void 0;\n\n        if (!list) continue;\n\n        if (!callback) {\n            delete this._callbacks[name];\n            continue;\n        }\n\n        for (j = 0; j < list.length; j++) {\n            cb = list[j];\n\n            if (!(cb === callback)) continue;\n\n            list = list.slice();\n            list.splice(j, 1);\n            this._callbacks[name] = list;\n            break;\n        }\n    }\n\n    return this;\n}\n\nfunction once (eventName, callback) {\n    let handler;\n\n    return this.bind(eventName, handler = function() {\n        this.unbind(eventName, handler);\n\n        return callback.apply(this, arguments);\n    });\n}\n\nfunction emit (...args) {\n    let i,\n        j,\n        list,\n        events,\n        callback,\n        eventName;\n\n    eventName = args.shift();\n    events = eventName.split(' ');\n\n    for (i = 0; i < events.length; i++) {\n\n        list = this._callbacks !== null ? this._callbacks[events[i]] : void 0;\n\n        if (!list) continue;\n\n        for (j = 0; j < list.length; j++) {\n            callback = list[j];\n            if (callback.apply(this, args) === false) break;\n        }\n    }\n}\n\nlet Emitter = {\n    bind,\n    on: bind,\n    unbind,\n    off: unbind,\n    once,\n    emit,\n};\n\nwindow.Emitter = Emitter;\n"],"names":["bind","eventName","callback","i","len","base","name","events","split","length","hasOwnProperty","_callbacks","push","unbind","j","cb","list","arguments","slice","splice","once","handler","apply","emit","args","shift","Emitter","on","off","window"],"mappings":";;;;;;IAEA,SAASA,IAAT,CAAeC,SAAf,EAA0BC,QAA1B,EAAoC;AAChC,IAAA,QAAI,CAACD,SAAD,IAAc,CAACC,QAAnB,EAA6B,OAAO,IAAP;;AAE7B,IAAA,QAAIC,UAAJ;AAAA,IAAA,QACIC,YADJ;AAAA,IAAA,QAEIC,aAFJ;AAAA,IAAA,QAGIC,aAHJ;AAAA,IAAA,QAIIC,eAJJ;;AAMAA,IAAAA,aAASN,UAAUO,KAAV,CAAgB,GAAhB,CAAT;AACAJ,IAAAA,UAAMG,OAAOE,MAAb;;AAEA,IAAA,QAAI,CAAC,KAAKC,cAAL,CAAoB,YAApB,CAAL,EAAwC;AACpC,IAAA,aAAKC,UAAL,KAAoB,KAAKA,UAAL,GAAkB,EAAtC;AACH,IAAA;;AAED,IAAA,SAAKR,IAAI,CAAT,EAAYA,IAAIC,GAAhB,EAAqBD,GAArB,EAA0B;AACtBG,IAAAA,eAAOC,OAAOJ,CAAP,CAAP;AACA,IAAA,SAACE,OAAO,KAAKM,UAAb,EAAyBL,IAAzB,MAAmCD,KAAKC,IAAL,IAAa,EAAhD;AACA,IAAA,aAAKK,UAAL,CAAgBL,IAAhB,EAAsBM,IAAtB,CAA2BV,QAA3B;AACH,IAAA;;AAED,IAAA,WAAO,IAAP;AACH,IAAA;;AAED,IAAA,SAASW,MAAT,CAAiBZ,SAAjB,EAA4BC,QAA5B,EAAsC;AAClC,IAAA,QAAIC,UAAJ;AAAA,IAAA,QACIW,UADJ;AAAA,IAAA,QAEIC,WAFJ;AAAA,IAAA,QAGIX,YAHJ;AAAA,IAAA,QAIIY,aAJJ;AAAA,IAAA,QAKIV,aALJ;AAAA,IAAA,QAMIC,eANJ;;AAQA,IAAA,QAAIU,UAAUR,MAAV,KAAqB,CAAzB,EAA4B;AACxB,IAAA,aAAKE,UAAL,GAAkB,EAAlB;;AAEA,IAAA,eAAO,IAAP;AACH,IAAA;;AAED,IAAA,QAAI,CAACV,SAAL,EAAgB,OAAO,IAAP;;AAEhBM,IAAAA,aAASN,UAAUO,KAAV,CAAgB,GAAhB,CAAT;;AAEA,IAAA,SAAKL,IAAI,CAAJ,EAAOC,MAAMG,OAAOE,MAAzB,EAAiCN,IAAIC,GAArC,EAA0CD,GAA1C,EAA+C;AAC3CG,IAAAA,eAAOC,OAAOJ,CAAP,CAAP;AACAa,IAAAA,eAAO,KAAKL,UAAL,KAAoB,IAApB,GAA2B,KAAKA,UAAL,CAAgBL,IAAhB,CAA3B,GAAmD,KAAK,CAA/D;;AAEA,IAAA,YAAI,CAACU,IAAL,EAAW;;AAEX,IAAA,YAAI,CAACd,QAAL,EAAe;AACX,IAAA,mBAAO,KAAKS,UAAL,CAAgBL,IAAhB,CAAP;AACA,IAAA;AACH,IAAA;;AAED,IAAA,aAAKQ,IAAI,CAAT,EAAYA,IAAIE,KAAKP,MAArB,EAA6BK,GAA7B,EAAkC;AAC9BC,IAAAA,iBAAKC,KAAKF,CAAL,CAAL;;AAEA,IAAA,gBAAI,EAAEC,OAAOb,QAAT,CAAJ,EAAwB;;AAExBc,IAAAA,mBAAOA,KAAKE,KAAL,EAAP;AACAF,IAAAA,iBAAKG,MAAL,CAAYL,CAAZ,EAAe,CAAf;AACA,IAAA,iBAAKH,UAAL,CAAgBL,IAAhB,IAAwBU,IAAxB;AACA,IAAA;AACH,IAAA;AACJ,IAAA;;AAED,IAAA,WAAO,IAAP;AACH,IAAA;;AAED,IAAA,SAASI,IAAT,CAAenB,SAAf,EAA0BC,QAA1B,EAAoC;AAChC,IAAA,QAAImB,iBAAJ;;AAEA,IAAA,WAAO,KAAKrB,IAAL,CAAUC,SAAV,EAAqBoB,WAAU,mBAAW;AAC7C,IAAA,aAAKR,MAAL,CAAYZ,SAAZ,EAAuBoB,QAAvB;;AAEA,IAAA,eAAOnB,SAASoB,KAAT,CAAe,IAAf,EAAqBL,SAArB,CAAP;AACH,IAAA,KAJM,CAAP;AAKH,IAAA;;AAED,IAAA,SAASM,IAAT,GAAwB;AACpB,IAAA,QAAIpB,UAAJ;AAAA,IAAA,QACIW,UADJ;AAAA,IAAA,QAEIE,aAFJ;AAAA,IAAA,QAGIT,eAHJ;AAAA,IAAA,QAIIL,iBAJJ;AAAA,IAAA,QAKID,kBALJ;;AADoB,IAAA,sCAANuB,IAAM;AAANA,IAAAA,YAAM;AAAA,IAAA;;AAQpBvB,IAAAA,gBAAYuB,KAAKC,KAAL,EAAZ;AACAlB,IAAAA,aAASN,UAAUO,KAAV,CAAgB,GAAhB,CAAT;;AAEA,IAAA,SAAKL,IAAI,CAAT,EAAYA,IAAII,OAAOE,MAAvB,EAA+BN,GAA/B,EAAoC;;AAEhCa,IAAAA,eAAO,KAAKL,UAAL,KAAoB,IAApB,GAA2B,KAAKA,UAAL,CAAgBJ,OAAOJ,CAAP,CAAhB,CAA3B,GAAwD,KAAK,CAApE;;AAEA,IAAA,YAAI,CAACa,IAAL,EAAW;;AAEX,IAAA,aAAKF,IAAI,CAAT,EAAYA,IAAIE,KAAKP,MAArB,EAA6BK,GAA7B,EAAkC;AAC9BZ,IAAAA,uBAAWc,KAAKF,CAAL,CAAX;AACA,IAAA,gBAAIZ,SAASoB,KAAT,CAAe,IAAf,EAAqBE,IAArB,MAA+B,KAAnC,EAA0C;AAC7C,IAAA;AACJ,IAAA;AACJ,IAAA;;AAED,IAAA,IAAIE,UAAU;AACV1B,IAAAA,cADU;AAEV2B,IAAAA,QAAI3B,IAFM;AAGVa,IAAAA,kBAHU;AAIVe,IAAAA,SAAKf,MAJK;AAKVO,IAAAA,cALU;AAMVG,IAAAA;AANU,IAAA,CAAd;;AASAM,IAAAA,OAAOH,OAAP,GAAiBA,OAAjB;;"}